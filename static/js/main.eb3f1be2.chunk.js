(this["webpackJsonpclients-frontend"]=this["webpackJsonpclients-frontend"]||[]).push([[0],{74:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(20),a=n.n(i),s=(n(74),n(31)),c=n(33),o=n(24),l=n(25),d=n(29),h=n(27),j=n(66),v=n(91),u=n(1);var b=function(){return Object(u.jsxs)("div",{className:"lds-ellipsis",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})},p=n(93),O=n(94),m=n(90),x=n(67),C=n(61),f=n(62);var g=function(e){var t=e.handleClose,n=e.deleteProvider,r=e.id;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(p.a,{size:"sm",centered:!0,show:!0,onHide:t,children:[Object(u.jsx)(p.a.Header,{closeButton:!0,children:Object(u.jsx)(p.a.Title,{children:"Are you sure to remove?"})}),Object(u.jsxs)(p.a.Footer,{children:[Object(u.jsx)(j.a,{variant:"danger",onClick:function(){return n(r)},children:"Remove"}),Object(u.jsx)(j.a,{variant:"primary",onClick:t,children:"Cancel"})]})]})})},P=n(39),w=n(44);var k=function(e){var t=e.handleClose,n=e.provider,i=e.saveEditedProvider,a=Object(r.useState)(n),s=Object(w.a)(a,2),c=s[0],o=s[1];return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(p.a,{size:"sm",show:!0,centered:!0,children:[Object(u.jsx)(p.a.Header,{children:Object(u.jsx)(p.a.Title,{style:{color:"#17a2b8"},children:"Edit Provider"})}),Object(u.jsx)(p.a.Body,{children:Object(u.jsx)("input",{value:c.name,onChange:function(e){return[o(Object(P.a)(Object(P.a)({},c),{},{name:e.target.value}))]}})}),Object(u.jsxs)(p.a.Footer,{children:[Object(u.jsx)(j.a,{variant:"danger",onClick:function(){c&&(i(c),t())},children:"Save Changes"}),Object(u.jsx)(j.a,{variant:"primary",onClick:t,children:"Cancel"})]})]})})},E=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={showConfirm:!1,showEdit:!1,checked:!1},e.openConfirmModal=function(){e.setState({showConfirm:!e.state.showConfirm})},e.openEditModal=function(){e.setState({showEdit:!e.state.showEdit})},e.handleCheck=function(){var t=e.props,n=t.onCheck,r=t.provider;e.setState({checked:!e.state.checked}),n(r._id)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.provider,n=e.deleteProvider,r=e.saveEditedProvider,i=e.singleClientProviders,a=this.state,s=a.showConfirm,c=a.showEdit,o=[];return i&&i.length>0&&(o=i.map((function(e){return e._id}))),Object(u.jsxs)("div",{className:"providerList",children:[Object(u.jsx)(x.a,{sm:6,children:Object(u.jsx)(O.a.Check,{type:"checkbox",label:t.name,defaultChecked:o&&o.includes(t._id),onClick:this.handleCheck})}),Object(u.jsx)(x.a,{sm:2,children:Object(u.jsx)(j.a,{variant:"custom",onClick:this.openEditModal,children:Object(u.jsx)(C.a,{icon:f.a,style:{color:"#17a2b8"}})})}),Object(u.jsx)(x.a,{sm:1,children:Object(u.jsx)(j.a,{variant:"custom",onClick:this.openConfirmModal,children:Object(u.jsx)(C.a,{icon:f.b,style:{color:"#d11a2a"}})})}),c&&Object(u.jsx)(k,{handleClose:this.openEditModal,provider:t,saveEditedProvider:r}),s&&Object(u.jsx)(g,{handleClose:this.openConfirmModal,deleteProvider:n,id:t._id})]})}}]),n}(r.PureComponent);var S=function(e){var t=e.providers,n=e.deleteProvider,r=e.saveEditedProvider,i=e.onCheck,a=e.singleClientProviders,s=t.map((function(e){return Object(u.jsx)(E,{provider:e,deleteProvider:n,saveEditedProvider:r,onCheck:i,singleClientProviders:a},e._id)}));return Object(u.jsx)("div",{children:s})},y=function(e,t){return t.some((function(t){return t.name===e}))},N=function(e,t,n,r){var i,a={};return""===e?a.name="*is required":function(e){return/^[\w'\-,.][^0-9_!\xa1?\xf7?\xbf/\\+=@#$%\u02c6&*(){}|~<>;:[\]]{2,}$/.test(e)}(e)||(a.name="*invalid"),""===t?a.email="*is required":!function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}(t)?a.email="*invalid":(i=t,r.some((function(e){return e.email===i}))&&(a.email="*email exists")),""===n?a.phone="*is required":/\d/g.test(n)||(a.phone="*invalid"),a},I=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={providerInput:""},e.handleClick=function(){var t=e.state.providerInput;""!==t?y(t,e.props.providers)?e.setState({providerInput:"*provider already exists"}):(e.props.addNewProvider(t),e.setState({providerInput:""})):e.setState({providerInput:"*name is required"})},e.handleChange=function(t){var n=t.target.value;e.setState({providerInput:n})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.providers,r=e.deleteProvider,i=e.saveEditedProvider,a=e.handleChangeNewClientInfo,s=e.onCheck,c=e.selectedProviders,o=e.handleNewClientInfo,l=e.errors,d=this.state.providerInput;return Object(u.jsxs)(p.a,{show:!0,centered:!0,children:[Object(u.jsx)(p.a.Header,{children:Object(u.jsx)(p.a.Title,{style:{color:"#17a2b8"},children:"New Client"})}),Object(u.jsx)(p.a.Body,{children:Object(u.jsxs)(O.a,{children:[Object(u.jsxs)(O.a.Group,{as:m.a,controlId:"formHorizontalName",children:[Object(u.jsxs)(O.a.Label,{column:!0,sm:2,children:["Name:",!!l&&l.name&&Object(u.jsxs)("span",{className:"errors",children:[" ",l.name," "]})]}),Object(u.jsx)(x.a,{sm:10,children:Object(u.jsx)(O.a.Control,{type:"name",name:"name",onChange:a})})]}),Object(u.jsxs)(O.a.Group,{as:m.a,controlId:"formHorizontalEmail",children:[Object(u.jsxs)(O.a.Label,{column:!0,sm:2,children:["Email:",!!l&&l.email&&Object(u.jsxs)("span",{className:"errors",children:[" ",l.email," "]})]}),Object(u.jsx)(x.a,{sm:10,children:Object(u.jsx)(O.a.Control,{type:"email",name:"email",onChange:a})})]}),Object(u.jsxs)(O.a.Group,{as:m.a,controlId:"formHorizontalPhone",children:[Object(u.jsxs)(O.a.Label,{column:!0,sm:2,children:["Phone:",!!l&&l.phone&&Object(u.jsxs)("span",{className:"errors",children:[" ",l.phone," "]})]}),Object(u.jsx)(x.a,{sm:10,children:Object(u.jsx)(O.a.Control,{type:"phone",name:"phone",onChange:a})})]}),Object(u.jsxs)(O.a.Group,{as:m.a,controlId:"formHorizontalProviders",children:[Object(u.jsx)(O.a.Label,{column:!0,sm:2,children:"Providers:"}),Object(u.jsx)(x.a,{sm:6,children:Object(u.jsx)(O.a.Control,{type:"providers",value:d,onChange:this.handleChange})}),Object(u.jsx)(x.a,{sm:4,children:Object(u.jsx)(j.a,{variant:"light",onClick:this.handleClick,disabled:c.size>0,children:"Add Provider"})})]}),Object(u.jsx)("fieldset",{children:Object(u.jsxs)(O.a.Group,{as:m.a,children:[Object(u.jsx)(O.a.Label,{column:!0,sm:2}),Object(u.jsx)(x.a,{sm:8,children:Object(u.jsx)(S,{providers:n,deleteProvider:r,saveEditedProvider:i,onCheck:s,selectedProviders:c})})]})})]})}),Object(u.jsxs)(p.a.Footer,{children:[Object(u.jsx)(j.a,{variant:"light",onClick:t,children:"Cancel"}),Object(u.jsx)(j.a,{variant:"info",onClick:o,children:"Add Client"})]})]})}}]),n}(r.PureComponent);var M=function(e){var t=e.newClient,n=e.showEditModal,r=" ";return t.providers.length>0&&(r=t.providers.map((function(e){return e.name})).join(", ")),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t.name}),Object(u.jsx)("td",{children:t.email}),Object(u.jsx)("td",{children:t.phone}),Object(u.jsx)("td",{children:r}),Object(u.jsx)("td",{children:Object(u.jsx)(j.a,{variant:"link",onClick:function(){return n(t)},children:"Edit"})})]})};var _=function(e){var t=e.confirmDelete,n=e.closeModals;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(p.a,{size:"sm",centered:!0,show:!0,onHide:t,children:[Object(u.jsx)(p.a.Header,{closeButton:!0,children:Object(u.jsx)(p.a.Title,{children:"Delete this client?"})}),Object(u.jsxs)(p.a.Footer,{children:[Object(u.jsx)(j.a,{variant:"danger",onClick:n,children:"Delete"}),Object(u.jsx)(j.a,{variant:"primary",onClick:t,children:"Cancel"})]})]})})},D=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state=Object(P.a)(Object(P.a)({},e.props.client),{},{showDeleteModal:!1,providerInput:"",selectedProviders:new Set(e.props.client.providers.map((function(e){return e._id}))),errors:null}),e.handleCheck=function(t){var n=new Set(e.state.selectedProviders);n.has(t)?n.delete(t):n.add(t),e.setState({selectedProviders:new Set(n)})},e.handleNewProvider=function(){var t=e.state.providerInput;""!==t?y(t,e.props.providers)?e.setState({providerInput:"*provider already exists"}):(e.props.addNewProvider(t),e.setState({providerInput:""})):e.setState({providerInput:"*name is required"})},e.handleChange=function(t){var n=t.target,r=n.name,i=n.value;e.setState(Object(c.a)({},r,i))},e.confirmDelete=function(){e.setState({showDeleteModal:!e.state.showDeleteModal})},e.closeModals=function(){e.props.deleteClient(e.state._id),e.props.onClose(null)},e.saveChanges=function(){var t=e.state,n=t._id,r=t.name,i=t.email,a=t.phone,c=t.selectedProviders,o={_id:n,name:r,email:i,phone:a,providers:Object(s.a)(c)},l=N(o.name,o.email,o.phone,e.props.clients);Object.values(l).length>0&&e.state.email===e.props.client.email&&(delete l.email,e.setState({errors:l})),0===Object.values(l).length&&(e.props.saveEditedClient(o),e.props.onClose(null))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.providers,r=e.deleteProvider,i=e.saveEditedProvider,a=this.state,s=a.name,c=a.email,o=a.phone,l=a.providerInput,d=a.showDeleteModal,h=a.errors;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(p.a,{show:!0,centered:!0,children:[Object(u.jsx)(p.a.Header,{children:Object(u.jsx)(p.a.Title,{style:{color:"#17a2b8"},children:"Edit Client"})}),Object(u.jsx)(p.a.Body,{children:Object(u.jsxs)(O.a,{children:[Object(u.jsxs)(O.a.Group,{as:m.a,controlId:"formHorizontalName",children:[Object(u.jsxs)(O.a.Label,{column:!0,sm:2,children:["Name:",!!h&&h.name&&Object(u.jsxs)("span",{className:"errors",children:[" ",h.name," "]})]}),Object(u.jsx)(x.a,{sm:10,children:Object(u.jsx)(O.a.Control,{type:"name",name:"name",value:s,onChange:this.handleChange})})]}),Object(u.jsxs)(O.a.Group,{as:m.a,controlId:"formHorizontalEmail",children:[Object(u.jsxs)(O.a.Label,{column:!0,sm:2,children:["Email:",!!h&&h.email&&Object(u.jsxs)("span",{className:"errors",children:[" ",h.email," "]})]}),Object(u.jsx)(x.a,{sm:10,children:Object(u.jsx)(O.a.Control,{type:"email",name:"email",value:c,onChange:this.handleChange})})]}),Object(u.jsxs)(O.a.Group,{as:m.a,controlId:"formHorizontalPhone",children:[Object(u.jsxs)(O.a.Label,{column:!0,sm:2,children:["Phone:",!!h&&h.phone&&Object(u.jsxs)("span",{className:"errors",children:[" ",h.phone," "]})]}),Object(u.jsx)(x.a,{sm:10,children:Object(u.jsx)(O.a.Control,{type:"phone",name:"phone",value:o,onChange:this.handleChange})})]}),Object(u.jsxs)(O.a.Group,{as:m.a,controlId:"formHorizontalProviders",children:[Object(u.jsx)(O.a.Label,{column:!0,sm:2,children:"Providers:"}),Object(u.jsx)(x.a,{sm:6,children:Object(u.jsx)(O.a.Control,{type:"providers",name:"providerInput",value:l,onChange:this.handleChange})}),Object(u.jsx)(x.a,{sm:4,children:Object(u.jsx)(j.a,{variant:"light",onClick:this.handleNewProvider,children:"Add Provider"})})]}),Object(u.jsx)("fieldset",{children:Object(u.jsxs)(O.a.Group,{as:m.a,children:[Object(u.jsx)(O.a.Label,{column:!0,sm:2}),Object(u.jsx)(x.a,{sm:8,children:Object(u.jsx)(S,{providers:n,deleteProvider:r,saveEditedProvider:i,onCheck:this.handleCheck,singleClientProviders:this.state.providers})})]})})]})}),Object(u.jsxs)(p.a.Footer,{className:"edit-client-btns",children:[Object(u.jsx)("div",{children:Object(u.jsx)(j.a,{variant:"danger",onClick:this.confirmDelete,children:"Delete Client"})}),Object(u.jsxs)("div",{children:[Object(u.jsx)(j.a,{className:"cancel-btn",variant:"light",onClick:t,children:"Cancel"}),Object(u.jsx)(j.a,{variant:"info",onClick:this.saveChanges,children:"Save Changes"})]})]})]}),d&&Object(u.jsx)(_,{confirmDelete:this.confirmDelete,closeModals:this.closeModals})]})}}]),n}(r.PureComponent),H=n(95),z=n(96),A=n(92),L=n(68),T=[{label:"Reset",value:""},{label:"A-Z",value:"a-z"},{label:"Z-A",value:"z-a"}];var G=function(e){var t=Object(r.useState)({label:"",value:""}),n=Object(w.a)(t,2),i=n[0],a=n[1],s=Object(r.useState)(""),c=Object(w.a)(s,2),o=c[0],l=c[1];return Object(u.jsxs)("div",{className:"search",children:[Object(u.jsxs)(H.a,{expand:"lg",children:[Object(u.jsx)(H.a.Brand,{children:Object(u.jsx)("span",{style:{color:"#17a2b8"},children:"Sort and Filter:"})}),Object(u.jsx)(H.a,{children:Object(u.jsx)(z.a,{children:Object(u.jsx)(A.a,{title:i.value?i.label:"Sort",children:T.map((function(e,t){return Object(u.jsx)(A.a.Item,{className:"options",onClick:function(){return a(e)},active:i.value===e.value,children:e.label},t)}))})})})]}),Object(u.jsx)("div",{className:"sortNamv",children:Object(u.jsxs)(O.a,{inline:!0,className:"searchBtn",children:[Object(u.jsx)(L.a,{className:"formControl",type:"text",placeholder:"Search",value:o,onChange:function(e){return l(e.target.value)}}),Object(u.jsx)(j.a,{className:"formButton",variant:"outline-info",onClick:function(){var t={};o&&(t.search=o),i.value&&(t.sort=i.value),e.getClients(t)},children:"Search"})]})})]})};var F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2?arguments[2]:void 0,r={method:t,headers:{"Content-Type":"application/json"}};return n&&(r.body=JSON.stringify(n)),fetch(e,r).then((function(e){return e.json()})).then((function(e){if(e.error)throw e.error;return e}))},B=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={name:"",email:"",phone:"",clients:[],providers:[],selectedProviders:new Set,newClientModal:!1,editClientModal:!1,editClient:null,spinner:!0,errors:null},e.getProviders=function(){F("http://localhost:3001/provider").then((function(t){e.setState({providers:t,spinner:!1})})).catch((function(e){console.error("Error:",e)}))},e.getClients=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="?";for(var r in t){var i=t[r];n="".concat(n).concat(r,"=").concat(i,"&")}"?"===n&&(n="");var a="http://localhost:3001/client".concat(n);F(a).then((function(t){e.setState({clients:t,spinner:!1})})).catch((function(e){console.log("Error:")}))},e.toggleAddNewClientModal=function(){e.setState({newClientModal:!e.state.newClientModal})},e.toggleEditClientModal=function(t){e.setState({editClient:t})},e.makeSpinnerWork=function(){e.setState({spinner:!0})},e.handleChange=function(t){var n=t.target,r=n.name,i=n.value;e.setState(Object(c.a)({},r,i))},e.handleCheck=function(t){var n=new Set(e.state.selectedProviders);n.has(t)?n.delete(t):n.add(t),e.setState({selectedProviders:n})},e.handleClick=function(){var t=e.state,n=t.name,r=t.email,i=t.phone,a=t.selectedProviders,c=t.clients,o=Object(s.a)(a),l=N(n,r,i,c);if(Object.values(l).length>0)return e.setState({errors:l});e.makeSpinnerWork();F("http://localhost:3001/client","POST",{name:n,email:r,phone:i,providers:o}).then((function(t){var n=t;e.setState({clients:[n].concat(Object(s.a)(e.state.clients)),newClientModal:!1,name:"",email:"",phone:"",selectedProviders:new Set,errors:null})})).then((function(){return e.getClients()})).catch((function(e){}))},e.addProvider=function(t){if(!e.state.providers.some((function(e){return e.name===t}))){F("http://localhost:3001/provider","POST",{name:t}).then((function(t){var n=t;e.setState({providers:[].concat(Object(s.a)(e.state.providers),[n])})})).catch((function(e){}))}},e.saveEditedProvider=function(t){var n="http://localhost:3001/provider/".concat(t._id);F(n,"PUT",t).then((function(n){var r=Object(s.a)(e.state.providers);r[e.state.providers.findIndex((function(e){return e._id===t._id}))]=n,e.setState({providers:r})})).catch((function(e){}))},e.saveEditedClient=function(t){e.makeSpinnerWork();var n="http://localhost:3001/client/".concat(t._id);F(n,"PUT",t).then((function(n){var r=Object(s.a)(e.state.clients);r[e.state.clients.findIndex((function(e){return e._id===t._id}))]=n,e.setState({clients:r,errors:null})})).then((function(){e.getClients()})).catch((function(e){}))},e.deleteProvider=function(t){var n="http://localhost:3001/provider/".concat(t);F(n,"DELETE").then((function(){var n=e.state.providers.filter((function(e){return e._id!==t}));e.setState({providers:n})})).catch((function(e){})),e.getClients()},e.deleteClient=function(t){var n="http://localhost:3001/client/".concat(t);F(n,"DELETE").then((function(){var n=e.state.clients.filter((function(e){return e._id!==t}));e.setState({clients:n})})).catch((function(e){}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getProviders(),this.getClients()}},{key:"render",value:function(){var e=this,t=this.state,n=t.clients,r=t.spinner,i=n.map((function(t){return Object(u.jsx)(M,{id:t._id,newClient:t,showEditModal:e.toggleEditClientModal},t._id)}));return Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)("div",{children:n.length>0&&Object(u.jsx)(G,{getClients:this.getClients})}),Object(u.jsxs)("div",{className:"table-wrapper",children:[Object(u.jsxs)("div",{className:"client-list",children:[Object(u.jsx)(j.a,{variant:"custom",onClick:this.getClients,children:Object(u.jsx)("h3",{children:"Clients"})}),Object(u.jsx)(j.a,{variant:"info",onClick:this.toggleAddNewClientModal,children:"New Client"})]}),Object(u.jsxs)(v.a,{bordered:!0,hover:!0,responsive:"sm",variant:"light",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{children:"Email"}),Object(u.jsx)("th",{children:"Phone"}),Object(u.jsx)("th",{children:"Providers"}),Object(u.jsx)("th",{})]})}),r?Object(u.jsx)("tbody",{className:"loader",children:Object(u.jsx)("tr",{children:Object(u.jsx)("td",{children:Object(u.jsx)(b,{})})})}):Object(u.jsx)("tbody",{children:i})]})]}),this.state.newClientModal&&Object(u.jsx)(I,{providers:this.state.providers,selectedProviders:this.state.selectedProviders,onClose:this.toggleAddNewClientModal,addNewProvider:this.addProvider,deleteProvider:this.deleteProvider,saveEditedProvider:this.saveEditedProvider,handleNewClientInfo:this.handleClick,handleChangeNewClientInfo:this.handleChange,onCheck:this.handleCheck,errors:this.state.errors}),!!this.state.editClient&&Object(u.jsx)(D,{client:this.state.editClient,providers:this.state.providers,onClose:function(){return e.toggleEditClientModal(null)},deleteClient:this.deleteClient,addNewProvider:this.addProvider,deleteProvider:this.deleteProvider,saveEditedProvider:this.saveEditedProvider,saveEditedClient:this.saveEditedClient,onCheck:this.handleCheck,clients:this.state.clients})]})}}]),n}(r.PureComponent),q=n.p+"static/media/error.0f3da28f.jpeg",J=n(55);var W=function(){return Object(u.jsx)("div",{className:"error",children:Object(u.jsx)(J.b,{to:"/",children:Object(u.jsx)("img",{src:q,style:{cursor:"pointer"},alt:"Error page"})})})},$=n(8);var R=function(){return Object(u.jsx)("div",{className:"wrapper",children:Object(u.jsx)(J.a,{children:Object(u.jsxs)($.d,{children:[Object(u.jsx)($.b,{path:"/",exact:!0,component:B}),Object(u.jsx)($.b,{path:"/404",exact:!0,component:W}),Object(u.jsx)($.a,{to:"/404"})]})})})};a.a.render(Object(u.jsx)(R,{}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.eb3f1be2.chunk.js.map